Real-Robot Log Requirements (for Point #3 closure)
==================================================

Purpose
-------
This checklist defines what must be collected on real Go2 logs to replace
model-derived channels (e.g., bms_voltage_pred) with measurable channels
in paper claims and evaluation.


A. Required Signals (must log)
------------------------------
Log at 500 Hz from one synchronized packet stream:

1) Motor/joint:
   - 12x motor case/housing temperatures (integer is acceptable)
   - 12x q, dq, tau_est

2) Battery/BMS:
   - pack voltage (Vpack)
   - pack current (Ibatt)
   - 8x cell voltages (cell_vol_0..7)
   - SOC
   - bms status / fault bits

3) Body/contact:
   - IMU quaternion, angular velocity, accelerometer
   - foot contact/force flags
   - tick/timestamp

4) Command side:
   - commanded vx, vy, wz (teleop or replay command)
   - command source ID (teleop/manual/replay)
   - emergency stop / mode transition flags


B. Synchronization and Data Integrity
-------------------------------------
1) Use one monotonic timestamp domain for all fields.
2) Confirm no packet reordering; if dropped packets exist, log drop count.
3) Save as row-wise CSV or Parquet with explicit units in header metadata.
4) Keep at least one raw run unfiltered for audit/reproducibility.


C. Minimum Real-Run Protocol
----------------------------
Collect each condition for >= 3 trials:

1) Nominal replay:
   - fixed command script (same as sim replay profile)
   - no fault injection

2) Thermal stress replay:
   - command profile emphasizing sustained load / turning

3) Voltage sag replay:
   - low SOC start, burst command profile

4) Fault robustness replay:
   - fixed leg fault condition (same leg/scale/start time as sim setup)

For each trial, store:
   - run ID
   - ambient temperature
   - battery starting SOC
   - floor/surface condition


D. 50 Hz Governor Evaluation View (derived from 500 Hz)
-------------------------------------------------------
Downsample to 50 Hz for governor analysis:

1) T_case_max(t) = max(12 motor case temps) per 20 ms window
2) Vcell_min(t) = min(8 cell voltages) per 20 ms window
3) Vpack(t) from packet (window mean or last)
4) command and measured yaw tracking in the same 20 ms grid

Apply the same governor config used in code/paper:
   - temp warn/crit/stop = 65/70/72 C
   - cell warn/soft/hard = 3.20/3.05/3.00 V
   - pack hard stop = 24.5 V
   - yaw exponent = 1.5


E. What to Validate from Real Logs
----------------------------------
1) Hard-stop reason attribution:
   - temp vs cell vs pack (or combined)

2) Safety-performance tradeoff:
   - completed rate
   - yaw tracking error
   - energy / mean power
   - time over temp warn

3) Threshold sanity:
   - check whether stop thresholds trigger before hardware protection events
   - tune margins only if repeated late-stop events are observed


F. Deliverables to Feed Back into Code/Paper
--------------------------------------------
1) Cleaned 50 Hz analysis dataset per run
2) Per-run summary JSON (same metric names as evaluate_replay summary where possible)
3) Threshold calibration note:
   - what changed (if any), why, and from which date/run set


G. Stop Conditions for "Point #3 resolved"
------------------------------------------
Point #3 is considered resolved when:

1) Main figures/tables can be produced using measurable real channels
   (T_case_max, Vcell_min, Vpack, tracking/power metrics),
2) No main claim depends on unmeasurable internal latent channels,
3) Real-log and sim-log metric definitions are explicitly aligned.

